(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/commodity_edit/commodity_edit"],{"0660":function(t,e,a){"use strict";a.r(e);var o=a("8145"),i=a("1f94");for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("2a45"),a("ea6c");var c,d=a("f0c5"),r=Object(d["a"])(i["default"],o["b"],o["c"],!1,null,"fe7ee70a",null,!1,o["a"],c);e["default"]=r.exports},"1f94":function(t,e,a){"use strict";a.r(e);var o=a("e0b1"),i=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e["default"]=i.a},"2a45":function(t,e,a){"use strict";var o=a("a42b"),i=a.n(o);i.a},8145:function(t,e,a){"use strict";var o;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement,o=(t._self._c,""===t.formdata.picUrl?a("2789"):null);t._isMounted||(t.e0=function(e){t.formdata.goodsName=e.detail},t.e1=function(e){t.formdata.counterPrice=e.detail},t.e2=function(e){t.formdata.retailPrice=e.detail},t.e3=function(e){t.formdata.unit=e.detail},t.e4=function(e){t.formdata.brief=e.detail},t.e5=function(e){t.formdata.keywords=e.detail},t.e6=function(e){t.categoryshow=!0},t.e7=function(e){t.statusshow=!0},t.e8=function(e){t.Newproductshow=!0},t.e9=function(e){t.BestSellersshow=!0},t.e10=function(e){t.statusshow=!1},t.e11=function(e){t.Newproductshow=!1},t.e12=function(e){t.BestSellersshow=!1},t.e13=function(e){t.categoryshow=!1}),t.$mp.data=Object.assign({},{$root:{m0:o}})},n=[]},"91cf":function(t,e,a){},a42b:function(t,e,a){},c83a:function(t,e,a){"use strict";(function(t){a("9eda");o(a("66fd"));var e=o(a("0660"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},e0b1:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a("e156")),i=n(a("d890"));function n(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{formdata:{goodsName:"",id:"",counterPrice:"",retailPrice:"",unit:"",brief:"",keywords:"",isOnline:"",isNew:"",isHot:"",picUrl:"",detail:"",categoryName:"",categoryId:""},categorylist:[],mainActiveIndex:0,categoryshow:!1,statusshow:!1,Newproductshow:!1,BestSellersshow:!1,statusData:[{text:"上架",id:1},{text:"下架",id:2}],yesornodata:[{text:"是",id:1},{text:"否",id:0}]}},onLoad:function(t){"undefined"!=t.id&&""!=t.id&&null!=t.id&&void 0!=t.id&&"null"!=t.id&&this.getcommdetil(t.id)},onShow:function(){var t=getCurrentPages(),e=t[t.length-1],a=e.data.commoditydata;a&&(this.formdata.detail=decodeURIComponent(a)),this.getcategory()},methods:{getcategory:function(){var e=this;o.default.request({url:"goods/category",method:"post"}).then((function(a){if(0==a.data.code){var o=a.data.data.categoryList,i=JSON.stringify(o),n=new RegExp("label","g"),c=new RegExp("value","g"),d=i.replace(n,"text"),r=d.replace(c,"id");e.categorylist=JSON.parse(r)}else t.showToast({title:a.data.message,icon:"none"})})).catch((function(e){t.showToast({title:"请求出错",icon:"none"})}))},editor_detil:function(e){t.navigateTo({url:"../detail_editor/detail_editor?rich=".concat(encodeURIComponent(e))})},getcommdetil:function(e){var a=this;o.default.request({url:"teamGoods/details",method:"get",data:{id:e}}).then((function(e){if(0==e.data.code){var o=e.data.data;a.formdata={goodsName:o.name,id:o.id,counterPrice:o.counterPrice,retailPrice:o.retailPrice,unit:o.unit,brief:o.brief,keywords:o.keywords,categoryId:o.categoryId,categoryName:o.categoryName,isOnline:o.isOnline,isNew:o.isNew,isHot:o.isHot,picUrl:o.picUrl,detail:o.detail}}else t.showToast({title:e.data.message,icon:"none"})})).catch((function(e){t.showToast({title:"请求出错",icon:"none"})}))},uploadimg_up:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(a){var i=a.tempFilePaths,n=t.getStorageSync("token");t.uploadFile({url:o.default.baseurl+"teamGoods/upload",filePath:i[0],header:{"X-Dts-Token":n},name:"file",success:function(t){var a=JSON.parse(t.data);0==a.code&&(e.formdata.picUrl=a.data.url)}})}})},onClickNav:function(t){var e=t.detail,a=void 0===e?{}:e;this.mainActiveIndex=a.index||0},onClickItem:function(t){var e=t.detail,a=void 0===e?{}:e,o=this.formdata.categoryId===a.id?null:a.id,i=this.formdata.categoryName===a.text?null:a.text;this.formdata.categoryId=o,this.formdata.categoryName=i,this.categoryshow=!1},statusConfirm:function(t){this.formdata.isOnline=t.detail.value.id,this.statusshow=!1},NewproductConfirm:function(t){this.formdata.isNew=t.detail.value.id,this.Newproductshow=!1},BestSellersConfirm:function(t){this.formdata.isHot=t.detail.value.id,this.BestSellersshow=!1},sumberbutton:function(){var e=this.formdata,a="";a=""===e.id?"teamGoods/create":"teamGoods/edit",o.default.request({url:a,method:"post",data:e}).then((function(e){0==e.data.code?((0,i.default)("操作成功"),t.switchTab({url:"../commodity/commodity"})):t.showToast({title:e.data.message,icon:"none"})})).catch((function(e){t.showToast({title:"请求出错",icon:"none"})}))}}};e.default=c}).call(this,a("543d")["default"])},ea6c:function(t,e,a){"use strict";var o=a("91cf"),i=a.n(o);i.a}},[["c83a","common/runtime","common/vendor"]]]);