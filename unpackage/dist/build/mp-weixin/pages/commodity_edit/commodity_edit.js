(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/commodity_edit/commodity_edit"],{"0146":function(t,e,o){"use strict";o.r(e);var a=o("b98d"),i=o.n(a);for(var n in a)"default"!==n&&function(t){o.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a},"0b1a":function(t,e,o){"use strict";var a=o("64a8"),i=o.n(a);i.a},"2c23":function(t,e,o){"use strict";var a;o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,a=(t._self._c,""===t.formdata.picUrl?o("db4e"):null);t._isMounted||(t.e0=function(e){t.formdata.goodsName=e.detail},t.e1=function(e){t.formdata.counterPrice=e.detail},t.e2=function(e){t.formdata.retailPrice=e.detail},t.e3=function(e){t.formdata.unit=e.detail},t.e4=function(e){t.formdata.brief=e.detail},t.e5=function(e){t.formdata.keywords=e.detail},t.e6=function(e){t.categoryshow=!0},t.e7=function(e){t.statusshow=!0},t.e8=function(e){t.Newproductshow=!0},t.e9=function(e){t.BestSellersshow=!0},t.e10=function(e){t.statusshow=!1},t.e11=function(e){t.Newproductshow=!1},t.e12=function(e){t.BestSellersshow=!1},t.e13=function(e){t.categoryshow=!1}),t.$mp.data=Object.assign({},{$root:{m0:a}})},n=[]},"354c":function(t,e,o){"use strict";o.r(e);var a=o("2c23"),i=o("0146");for(var n in i)"default"!==n&&function(t){o.d(e,t,(function(){return i[t]}))}(n);o("7e8a"),o("0b1a");var d,r=o("f0c5"),c=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"fe7ee70a",null,!1,a["a"],d);e["default"]=c.exports},6187:function(t,e,o){},"64a8":function(t,e,o){},"7e8a":function(t,e,o){"use strict";var a=o("6187"),i=o.n(a);i.a},b2b6:function(t,e,o){"use strict";(function(t){o("369d");a(o("66fd"));var e=a(o("354c"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},b98d:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(o("6e6e")),i=n(o("058e"));function n(t){return t&&t.__esModule?t:{default:t}}var d={data:function(){return{formdata:{goodsName:"",id:"",counterPrice:"",retailPrice:"",unit:"",brief:"",keywords:"",isOnline:"",isNew:"",isHot:"",picUrl:"",detail:"",categoryName:"",categoryId:""},categorylist:[],mainActiveIndex:0,categoryshow:!1,statusshow:!1,Newproductshow:!1,BestSellersshow:!1,statusData:[{text:"上架",id:1},{text:"下架",id:2}],yesornodata:[{text:"是",id:1},{text:"否",id:0}]}},onLoad:function(t){"undefined"!=t.id&&""!=t.id&&null!=t.id&&void 0!=t.id&&"null"!=t.id&&this.getcommdetil(t.id)},onShow:function(){var t=getCurrentPages(),e=t[t.length-1],o=e.data.commoditydata;o&&(this.formdata.detail=decodeURIComponent(o)),this.getcategory()},methods:{getcategory:function(){var e=this;a.default.request({url:"goods/category",method:"post"}).then((function(o){if(0==o.data.code){var a=o.data.data.categoryList,i=JSON.stringify(a),n=new RegExp("label","g"),d=new RegExp("value","g"),r=i.replace(n,"text"),c=r.replace(d,"id");e.categorylist=JSON.parse(c)}else t.showToast({title:o.data.message,icon:"none"})})).catch((function(e){t.showToast({title:"请求出错",icon:"none"})}))},editor_detil:function(e){t.navigateTo({url:"../detail_editor/detail_editor?rich=".concat(encodeURIComponent(e))})},getcommdetil:function(e){var o=this;a.default.request({url:"teamGoods/details",method:"get",data:{id:e}}).then((function(e){if(0==e.data.code){var a=e.data.data;o.formdata={goodsName:a.name,id:a.id,counterPrice:a.counterPrice,retailPrice:a.retailPrice,unit:a.unit,brief:a.brief,keywords:a.keywords,categoryId:a.categoryId,categoryName:a.categoryName,isOnline:a.isOnline,isNew:a.isNew,isHot:a.isHot,picUrl:a.picUrl,detail:a.detail}}else t.showToast({title:e.data.message,icon:"none"})})).catch((function(e){t.showToast({title:"请求出错",icon:"none"})}))},uploadimg_up:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(o){var i=o.tempFilePaths,n=t.getStorageSync("token");t.uploadFile({url:a.default.baseurl+"teamGoods/upload",filePath:i[0],header:{"X-Dts-Token":n},name:"file",success:function(t){var o=JSON.parse(t.data);0==o.code&&(e.formdata.picUrl=o.data.url)}})}})},onClickNav:function(t){var e=t.detail,o=void 0===e?{}:e;this.mainActiveIndex=o.index||0},onClickItem:function(t){var e=t.detail,o=void 0===e?{}:e,a=this.formdata.categoryId===o.id?null:o.id,i=this.formdata.categoryName===o.text?null:o.text;this.formdata.categoryId=a,this.formdata.categoryName=i,this.categoryshow=!1},statusConfirm:function(t){this.formdata.isOnline=t.detail.value.id,this.statusshow=!1},NewproductConfirm:function(t){this.formdata.isNew=t.detail.value.id,this.Newproductshow=!1},BestSellersConfirm:function(t){this.formdata.isHot=t.detail.value.id,this.BestSellersshow=!1},sumberbutton:function(){var e=this.formdata,o="";o=""===e.id?"teamGoods/create":"teamGoods/edit",a.default.request({url:o,method:"post",data:e}).then((function(e){0==e.data.code?((0,i.default)("操作成功"),t.switchTab({url:"../commodity/commodity"})):t.showToast({title:e.data.message,icon:"none"})})).catch((function(e){t.showToast({title:"请求出错",icon:"none"})}))}}};e.default=d}).call(this,o("543d")["default"])}},[["b2b6","common/runtime","common/vendor"]]]);